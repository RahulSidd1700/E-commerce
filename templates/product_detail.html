{% extends "base.html" %}
{% block title %}{{ product.name }}{% endblock %}
{% block content %}
<h2>{{ product.name }}</h2>
<p>{{ product.description }}</p>
<p>Price: ${{ product.price }}</p>
<p>Stock: {{ product.stock }}</p>
{% if product.image %}
    <img src="{{ product.image.url }}" alt="{{ product.name }}" style="max-width: 300px;">
{% endif %}

{% if product.stock > 0 %}
    <form action="{% url 'product_detail' product.pk %}" method="post" class="mt-3 d-flex align-items-center">
        {% csrf_token %}
        <div class="me-2">
            <label for="{{ add_to_cart_form.quantity.id_for_label }}" class="form-label mb-0">Quantity:</label>
            {{ add_to_cart_form.quantity }}
        </div>
        <button type="submit" class="btn btn-success">Add to Cart</button>
    </form>
    {% if add_to_cart_form.quantity.errors %}
        <div class="text-danger">
            {% for error in add_to_cart_form.quantity.errors %}
                <p>{{ error }}</p>
            {% endfor %}
        </div>
    {% endif %}
{% else %}
    <p class="text-danger mt-3">Out of Stock</p>
{% endif %}

<div class="mt-3">
    <a href="{% url 'products' %}" class="btn btn-secondary">Back to Products</a>
</div>
{% endblock %}